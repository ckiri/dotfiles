47,49d46
< /* function keys */
< #include <X11/XF86keysym.h>
< 
211d207
< static void sigchld(int unused);
1548a1545,1551
> 	struct sigaction sa;
> 
> 	/* do not transform children into zombies when they terminate */
> 	sigemptyset(&sa.sa_mask);
> 	sa.sa_flags = SA_NOCLDSTOP | SA_NOCLDWAIT | SA_RESTART;
> 	sa.sa_handler = SIG_IGN;
> 	sigaction(SIGCHLD, &sa, NULL);
1550,1551c1553,1554
< 	/* clean up any zombies immediately */
< 	sigchld(0);
---
> 	/* clean up any zombies (inherited from .xinitrc etc) immediately */
> 	while (waitpid(-1, NULL, WNOHANG) > 0);
1642,1649d1644
< }
< 
< void
< sigchld(int unused)
< {
< 	if (signal(SIGCHLD, sigchld) == SIG_ERR)
< 		die("can't install SIGCHLD handler:");
< 	while (0 < waitpid(-1, NULL, WNOHANG));
